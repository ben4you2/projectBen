<!DOCTYPE html>
<html lang="en" x-data="voterApp()" x-cloak ng-app>
<head>
    <!-- Head content remains the same -->
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="cdn_modules/bootstrap@5.3.3/css/bootstrap.min.css"></script>
    <title>Voter Registration System</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript" src="cdn_modules/web3@4.16.0/web3.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üó≥Ô∏è</text></svg>">
    
  <style>
  
    body{
     margin:100%;
    }
   img{
      width:200px;
      height:210px;
      border:none;
      border-radius:13px;
    }
    #btn{
      background-color:lightsalmon;
      color:#fff;
      border-radius:13px;
      border:none;
      padding:10px;
      margin:20px;
      margin-top:20px;
    }
    div{
      margin-top:20px;
    }
    
  div p{
    margin-top:40px;
  }
  h2{
    font-size:20px;
    margin-top:30px;
  }
    
    input{
      padding:16px;
      margin:12px;
      border:2px solid gainsboro;
    }
        [x-cloak] { display: none !important; }
        .avatar-preview { height: 100px; width: 100px; object-fit: cover; }
        .voter-enter-active { transition: all 0.3s ease-out; }
        .voter-enter-from { opacity: 0; transform: translateY(-20px); }
        
        
        /*Styling and pasting the css code here*/
        
        
   /* Hamburger Icon Styling */


    </style>
    
</head>

<body class="bg-gray-50 min-h-screen">
  
 <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header remains unchanged -->
<div>
  <section class="bg-white rounded-xl shadow-lg p-6 mb-8 animate_animated animate__fadeInUp">
    <h3 id="top">That is an animated text content</h3>
    <em>This is an animated text</em>
  </section>
  
  <p>This is about a place we are shoiwing</p>
  <div class="bg-white rounded-xl shadow-lg p-6 mb-8 animate__animated animate_animated" style="background-color:#fei23e;color:#aesd23h;border:none">
       
 <h1>Progress Application</h1>
  <p> The programs are designed to help applications developers</p>
       
       <button type="button" id="btn">See the content</button>
  </div>
  
  <button id="btn">Develop</button>
  <button id="btn">Program</button>
  <button id="btn">Deploy</button>
   
   <div class=" rounded-xl p-6 md-8">
     
     <h2>Form of the container</h2>
     <br>
     <form action="#" method="post">
    
       <br>
       <ion-label>Name</ion-label>
       <input type="text" slot="start" id="text"> 
       <ion-label>Email</ion-label>
       <input type=""
     </form>
     
   </div>

</div>
</div>
</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
 <script>
    
document.addEventListener('alpine:init', () => {
            Alpine.data('voterApp', () => ({
                isEditMode: false,
                currentEditIndex: -1,
                searchQuery: '',
                sortBy: 'name',
                voters: JSON.parse(localStorage.getItem('voters')) || [],
                state: {
                    formData: { 
                        name: '', 
                        idNumber: '', 
                        age: '', 
                        email: '', 
                        address: '', 
                        photo: '',
                        registrationDate: null 
                    },
                    photoPreview: null
                },

                get filteredVoters() {
                    let filtered = this.voters.filter(voter => {
                        const search = this.searchQuery.toLowerCase();
                        return Object.values(voter).some(value =>
                            String(value).toLowerCase().includes(search)
                        );
                    });

                    return filtered.sort((a, b) => {
                        if (this.sortBy === 'age') return a.age - b.age;
                        if (this.sortBy === 'idNumber') return a.idNumber.localeCompare(b.idNumber);
                        return a.name.localeCompare(b.name);
                    });
                },

                initApp() {
                    this.$watch('voters', value => {
                        localStorage.setItem('voters', JSON.stringify(value));
                    });
                },

                async registerVoter() {
                    if (!this.validateForm()) return;

                    if (this.isEditMode) {
                        this.voters[this.currentEditIndex] = { 
                            ...this.state.formData,
                            registrationDate: new Date().toISOString()
                        };
                    } else {
                        this.voters.unshift({ 
                            ...this.state.formData,
                            registrationDate: new Date().toISOString()
                        });
                    }

                    await Swal.fire({
                        icon: 'success',
                        title: `${this.isEditMode ? 'Updated' : 'Registered'} Successfully!`,
                        showConfirmButton: false,
                        timer: 1500
                    });

                    this.resetForm();
                },

                editVoter(filteredIndex) {
                    const actualIndex = this.voters.indexOf(this.filteredVoters[filteredIndex]);
                    const voter = this.voters[actualIndex];
                    this.state.formData = { ...voter };
                    this.state.photoPreview = voter.photo;
                    this.isEditMode = true;
                    this.currentEditIndex = actualIndex;
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },

                async generatePDFReport() {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // PDF Generation logic from previous answer
                    // ...
                    
                    doc.save(`voter-report-${new Date().toISOString().slice(0,10)}.pdf`);
                },

                validateForm() {
                    const { idNumber, age } = this.state.formData;
                    const idExists = this.voters.some((v, i) => 
                        v.idNumber === idNumber && i !== this.currentEditIndex
                    );

                    if (idExists) {
                        Swal.fire('Error', 'ID Number already exists', 'error');
                        return false;
                    }

                    if (age < 18) {
                        Swal.fire('Error', 'Minimum age is 18', 'error');
                        return false;
                    }

                    return true;
                },

                resetForm() {
                    this.state.formData = { 
                        name: '', idNumber: '', age: '', 
                        email: '', address: '', photo: '',
                    };
                    this.state.photoPreview = null;
                    document.getElementById('photo').value = '';
                    this.isEditMode = false;
                    this.currentEditIndex = -1;
                }
            }));
        });
        
            /*hamburger menu*/
    // script.js
const hamburger = document.getElementById('hamburger');
const navLinks = document.getElementById('nav-links');

hamburger.addEventListener('click', () => {
  navLinks.classList.toggle('active');
});

    </script>
    
    <script type="text/javascript" src="cdn_modules/bootstrap@5.3.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>